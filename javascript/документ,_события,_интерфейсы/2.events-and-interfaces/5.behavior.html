<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link href="../files/style.css" rel="stylesheet">
  <title>Приём проектирования "поведение"</title>
</head>

<body><div class="wrapper">

<nav><p><a href="../index.html">Документ, события, интерфейсы</a>/<a href="../events-and-interface.html">Основы работы с событиями</a>/<a href="">Приём проектирования "поведение"</a></p></nav>
<p>Шаблон проектирования «поведение» (behavior) позволяет задавать хитрые обработчики на элементе декларативно, установкой специальных HTML-атрибутов и классов.</p>
<h2>Описание</h2>
<p>Приём проектирования «поведение» состоит из двух частей:</p>
<ol>
  <li>Элементу ставится атрибут, описывающий его поведение.</li>
  <li>При помощи делегирования ставится обработчик на документ, который ловит все клики и, если элемент имеет нужный атрибут, производит нужное действие.</li>
</ol>
<h2>Пример</h2>
<p>Например, добавим «поведение», которое всем элементам, у которых стоит атрибут <code>data-counter</code>, будет при клике увеличивать значение на <code>1</code>:</p>
<pre><code>Счётчик:
&lt;button data-counter>1&lt;/button>
Ещё счётчик:
&lt;button data-counter>2&lt;/button>

&lt;script>
  document.onclick = function(event) {
    if (!event.target.hasAttribute('data-counter')) return;

    var counter = event.target;

    counter.innerHTML++;
  };
&lt;/script></code></pre>
<h2>Ещё пример</h2>
<p>Сделаем так, что при клике на элемент с атрибутом <code>data-toggle-id</code> будет скрываться/показываться элемент с заданным <code>id</code>:</p>
<pre><code>&lt;button data-toggle-id="subscribe-mail">
  Показать форму подписки
&lt;/button>

&lt;form id="subscribe-mail" hidden>
  Ваша почта: &lt;input type="email">
&lt;/form>

&lt;script>
  document.onclick = function(event) {
    var target = event.target;

    var id = target.getAttribute('data-toggle-id');
    if (!id) return;

    var elem = document.getElementById(id);

    elem.hidden = !elem.hidden;
  };
&lt;/script></code></pre>

</div></body>

</html>