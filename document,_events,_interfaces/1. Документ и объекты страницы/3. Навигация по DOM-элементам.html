<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../files/css/master.css">
    <script async src="../files/js/main_script.js"></script>
    <title>Навигация по DOM-элементам</title>
  </head>
  <body>
<div class="wrapper">
  <div class="back"><a href="../index.html">&lt;</a></div>
  <p>DOM позволяет делать что угодно с HTML-элементом и его содержимым, но для этого нужно сначала нужный элемент получить.</p>
  <p>Доступ к DOM начинается с объекта <code>document</code>. Из него можно добраться до любых узлов.</p>
  <p>Так выглядят основные ссылки, по которым можно переходить между узлами DOM:</p>
  <img src="../files/img/dom-links.png">
  <h2>Сверху documentElement и body</h2>
  <p>Самые верхние элементы дерева доступны напрямую из <code>document</code>.</p>
<pre><code>&lt;HTML> = document.documentElement</code></pre>
  <p>Это свойство ссылается на DOM-объект для тега <code>&lt;html></code>.</p>
<pre><code>&lt;BODY> = document.body</code></pre>
  <p>Соответствует тегу <code>&lt;body></code>.</p>
  <h2>Дети: childNodes, firstChild, lastChild</h2>
  <p>Здесь и далее мы будем использовать два принципиально разных термина.</p>
  <ul>
    <li><b>Дочерние элементы (или дети)</b> – элементы, которые лежат непосредственно внутри данного. Например, внутри <code>&lt;HTML></code> обычно лежат <code>&lt;HEAD></code> и <code>&lt;BODY></code>.</li>
    <li><b>Потомки</b> – все элементы, которые лежат внутри данного, вместе с их детьми, детьми их детей и так далее. То есть, всё поддерево DOM.</li>
  </ul>
  <p>Псевдо-массив <code>childNodes</code> хранит все дочерние элементы, включая текстовые.</p>
  <p>Пример ниже последовательно выведет дочерние элементы <code>document.body</code>:</p>
<pre><code>&lt;!DOCTYPE HTML>
&lt;html>

&lt;body>
  &lt;div>Начало&lt;/div>

  &lt;ul>
    &lt;li>Информация&lt;/li>
  &lt;/ul>

  &lt;div>Конец&lt;/div>

  &lt;script>
    for (var i = 0; i &lt; document.body.childNodes.length; i++) {
      alert( document.body.childNodes[i] ); // Text, DIV, Text, UL, ..., SCRIPT
    }
  &lt;/script>
  ...
&lt;/body>

&lt;/html></code></pre>
  <p>Свойства <code>firstChild</code> и <code>lastChild</code> обеспечивают быстрый доступ к первому и последнему элементу.</p>
<pre><code>elem.childNodes[0] === elem.firstChild
elem.childNodes[elem.childNodes.length - 1] === elem.lastChild</code></pre>
  <h2>Соседи и родитель</h2>
  <p>Доступ к элементам слева и справа данного можно получить по ссылкам <code>previousSibling</code> / <code>nextSibling</code>.</p>
  <p>Родитель доступен через <code>parentNode</code>. Если долго идти от одного элемента к другому, то рано или поздно дойдёшь до корня DOM, то есть до <code>document.documentElement</code>, а затем и <code>document</code>.</p>
  <h2>Навигация только по элементам</h2>
  <p>Навигационные ссылки, описанные выше, равно касаются всех узлов в документе. В частности, в <code>childNodes</code> сосуществуют и текстовые узлы и узлы-элементы и узлы-комментарии, если есть.</p>
  <p>Но для большинства задач текстовые узлы нам не интересны.</p>
  <p>Поэтому посмотрим на дополнительный набор ссылок, которые их не учитывают:</p>
  <img src="../files/img/dom-links-elements.png">
  <p>Эти ссылки похожи на те, что раньше, только в ряде мест стоит слово <code>Element</code>:</p>
  <ul>
    <li><code>children</code> – только дочерние узлы-элементы, то есть соответствующие тегам.</li>
    <li><code>firstElementChild</code>, <code>lastElementChild</code> – соответственно, первый и последний дети-элементы.</li>
    <li><code>previousElementSibling</code>, <code>nextElementSibling</code> – соседи-элементы.</li>
    <li><code>parentElement</code> – родитель-элемент.</li>
  </ul>
  <p>Модифицируем предыдущий пример, применив <code>children</code> вместо <code>childNodes</code>.</p>
  <p>Теперь он будет выводить не все узлы, а только узлы-элементы:</p>
<pre><code>&lt;!DOCTYPE HTML>
&lt;html>

&lt;body>
  &lt;div>Начало&lt;/div>

  &lt;ul>
    &lt;li>Информация&lt;/li>
  &lt;/ul>

  &lt;div>Конец&lt;/div>

  &lt;script>
    for (var i = 0; i &lt; document.body.children.length; i++) {
      alert( document.body.children[i] ); // DIV, UL, DIV, SCRIPT
    }
  &lt;/script>
  ...
&lt;/body>

&lt;/html></code></pre>
  <p>Всегда верны равенства:</p>
<pre><code>elem.firstElementChild === elem.children[0]
elem.lastElementChild === elem.children[elem.children.length - 1]</code></pre>
  <h2>Особые ссылки для таблиц</h2>
  <p>У конкретных элементов DOM могут быть свои дополнительные ссылки для большего удобства навигации.</p>
  <p>Здесь мы рассмотрим таблицу, так как это важный частный случай и просто для примера.</p>
  <p><code>TABLE</code></p>
  <ul>
    <li><code>table.rows</code> – коллекция строк <code>TR</code> таблицы.</li>
    <li><code>table.caption/tHead/tFoot</code> – ссылки на элементы таблицы <code>CAPTION</code>, <code>THEAD</code>, <code>TFOOT</code>.</li>
    <li><code>table.tBodies</code> – коллекция элементов таблицы <code>TBODY</code>, по спецификации их может быть несколько.</li>
  </ul>
  <p><code>THEAD/TFOOT/TBODY</code></p>
  <ul>
    <li><code>tbody.rows</code> – коллекция строк <code>TR</code> секции.</li>
  </ul>
  <p><code>TR</code></p>
  <ul>
    <li><code>tr.cells</code> – коллекция ячеек <code>TD/TH</code>.</li>
    <li><code>tr.sectionRowIndex</code> – номер строки в текущей секции <code>THEAD/TBODY</code>.</li>
    <li><code>tr.rowIndex</code> – номер строки в таблице.</li>
  </ul>
  <p><code>TD/TH</code></p>
  <ul>
    <li><code>td.cellIndex</code> – номер ячейки в строке.</li>
  </ul>
  <p>Пример использования:</p>
<pre><code>&lt;table>
  &lt;tr>
    &lt;td>один&lt;/td> &lt;td>два&lt;/td>
  &lt;/tr>
  &lt;tr>
    &lt;td>три&lt;/td>  &lt;td>четыре&lt;/td>
  &lt;/tr>
&lt;/table>

&lt;script>
var table = document.body.children[0];

alert( table.rows[0].cells[0].innerHTML ) // "один"
&lt;/script></code></pre>
</div>
  </body>
</html>
